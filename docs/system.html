<!DOCTYPE html><html><head><title>Trial / Operating System Interaction</title><meta property="og:image" content="https://repository-images.githubusercontent.com/54314855/81c55af6-b2c4-45f0-b66d-f29fdd37be7f"><meta property="og:image:alt" content="Trial offers a number of functions to interact with the operating system facilities in a portable fashion. Since this is more of a toolkit kind of thing, here's a list of relevant functions:"><meta property="og:type" content="object"><meta property="og:title" content="Trial / Operating System Interaction"><meta property="og:url" content="https://shirakumo.org/docs/trial/system.mess.html"><meta property="og:description" content="Trial offers a number of functions to interact with the operating system facilities in a portable fashion. Since this is more of a toolkit kind of thing, here's a list of relevant functions:"></head><body><article><a class="index" href="index.html">Index</a><style>article{max-width:800px;font-size:12pt;font-family:sans-serif;margin:0 auto 3em auto;}article h1{text-align:center;font-size:2em;}article img{margin:0 auto;max-width:100%;}article blockquote{border-left:0.2em solid gray;margin-left:1em;padding-left:1em;}article figcaption{padding:0.2em 1em;background:#E0E0E0;}article code{background:#F0F0F0;padding:0 0.1em;}article .code-block{padding:0.1em 0.5em;overflow-x:auto;}article a.index{display:block;text-decoration:none;text-align:center;font-size:1.1em;background:#151515;border:2px solid #151515;color:#FEFEFE;}article a.index:hover{background:#FEFEFE;color:#151515;}</style><h1 id="operating system interaction">Operating System Interaction</h1><p>Trial offers a number of functions to interact with the operating system facilities in a portable fashion. Since this is more of a toolkit kind of thing, here's a list of relevant functions:</p><ul><li><p><code>data-root</code><br>Returns the runtime directory of the game, which is either the executable directory in deployed mode, or the system source directory in dev mode.</p></li><li><p><code>current-time</code><br>Returns a monotonic clock in seconds as a double float. The precision is implementation defined, but may very well be higher than internal-real-time.</p></li><li><p><code>open-in-browser</code><br>Will open the given URL in a browser. This will also take care of using platform-specific browsers such as when Steam is used.</p></li><li><p><code>open-in-file-manager</code><br>Will open the given path in a file manager.</p></li><li><p><code>envvar-directory</code><br>Retrieve the directory described by an environment variable. May also return NIL if the variable is unset or empty.</p></li><li><p><code>tempdir</code><br>Return a path to the local system's temporary directory. Files in here may be deleted when the application exits, or when the system restarts.</p></li><li><p><code>tempfile</code><br>Return a path to a temporary file. Note: this function does not guarantee that the requested file does not already exist. Please use a loop over <code>with-open-file</code>.</p></li><li><p><code>with-tempfile</code><br>Binds <code>path</code> to a temporary file path according to <code>tempfile</code> and ensures the file is deleted when body exits.  </p></li><li><p><code>logfile</code><br>Returns the path to the central Trial log file, typically stored next to the executable unless the environment variable <code>TRIAL_LOGFILE</code> is set.</p></li><li><p><code>config-directory</code><br>Returns the path to the directory to use to store configuration and save files. This can be configured through the environment variable <code>TRIAL_CONFIG_HOME</code>, <code>AppData</code> on Windows, and <code>XDG_CONFIG_HOME</code> everywhere else. The path is dependent on the <code>+app-vendor+</code> and <code>+app-system+</code>.  </p></li><li><p><code>username</code><br>Returns a descriptive name of the current user. This may be a human-readable display name of some sort, or their user account name. You may pass <code>T</code> to fetch the answer without the context of a <code>main</code> instance.</p></li><li><p><code>prevent-powersave</code><br>Try to prevent the system from entering powersave mode or activating the screensaver. You must regularly call <code>ping-powersave</code> afterwards, and <code>restore-powersave</code> once you're done.</p></li></ul></article></body></html>